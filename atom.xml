<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://blog.elex.vip</id>
    <title>Elex&apos;Blog</title>
    <updated>2024-11-14T10:32:25.913Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://blog.elex.vip"/>
    <link rel="self" href="https://blog.elex.vip/atom.xml"/>
    <subtitle>To be or not to be, that&amp;acute;s a question.</subtitle>
    <logo>https://blog.elex.vip/images/avatar.png</logo>
    <icon>https://blog.elex.vip/favicon.ico</icon>
    <rights>All rights reserved 2024, Elex&apos;Blog</rights>
    <entry>
        <title type="html"><![CDATA[番外篇——江恩矩阵图简介]]></title>
        <id>https://blog.elex.vip/post/fan-wai-pian-jiang-en-ju-zhen-tu-jian-jie/</id>
        <link href="https://blog.elex.vip/post/fan-wai-pian-jiang-en-ju-zhen-tu-jian-jie/">
        </link>
        <updated>2024-11-14T10:01:04.000Z</updated>
        <content type="html"><![CDATA[<p><img src="https://blog.elex.vip/post-images/1731578566761.png" alt="" loading="lazy"><br>
在1892年，如果你曾作为一个商人在横跨得克萨斯州的火车上你或许会从一个高个子，瘦瘦的，年龄大约只有13岁的男孩那里买过一份报纸或雪茄烟。当你与同行的旅客谈论有关投资方面的事情时，你或许会注意到那个年轻人正在全神贯注地偷听你们的谈话。</p>
<p>如果你问他叫什么名字，他会告诉你他叫威廉，而且，的确他对于商品交易很感兴趣，他的父亲是安吉立纳(Angelina)县的一个农场主人，而且恰恰他所认识的每个人也是这样的。他们都很关心他们的棉花将会给他们带来的收益。如果你问小威廉长大后想做些什么？是否也想在得克萨斯州的东部耕种土地？他会说不，他没这样想过。他想成为一个交易商。你或许会说：『噢！祝你好运，小威廉 ，有一天你或许会有自己的事业，甚至会很有名。谁知道呢？没有人能知道未来。』</p>
<p>在火车过道上来回走过的年轻偷听者就是我们的江恩大师，<strong>威廉.戴伯.江恩</strong>。</p>
<p>他也许在想，真的没有人能预知未来吗？</p>
<p>威廉.戴伯.江恩William Delbert Gann（1878/6/6~1955/6/14) 出生在美国德州Lufkin市郊一个种植棉花的农场。江恩自1908年在纽约华尔街重新开始从事交易，直到1955年辞世，漫长的投资生涯中，『矩阵图』一直是江恩致力使用的推算工具，堪称是江恩一生的精华，是江恩理论中最简易明确的技术分析。</p>
<p>一张四方形的数字图，其中竟隐含了所有金融商品的进退趋势，是的，此图可以推算所有的金融商品，及所有与数字有关的东西，当然也包括股票。</p>
<p>二十世纪初的世界，是江恩活跃的时代，他经过第一次世界大战，走过1929年股灾，接着经历著名的三十年代经济大萧条，及见到第二次世界大战。在这些动荡失序与经济紊乱的漫长岁月里，江恩都安然渡过，且赚到钱，并活到77岁高龄。</p>
<p>江恩是二十世纪初在华尔街有着神奇色彩的传奇人物，他是金融市场史上最成功的交易员之一，更是技术分析领域的超级大师、领导者。</p>
<p>江恩有6本着作，5本小册子，及庞大的课程讲义……<br>
<img src="https://blog.elex.vip/post-images/1731578639279.png" alt="" loading="lazy"><br>
江恩理论是什么？</p>
<p>江恩发现金融市场同样受着自然法则的规范，有其振动规律。市场价格的波折、起伏不是紊乱的，而是可通过数学及时间周期来预测。因此江恩用了10年时间，创出摆动图的曲线图表之外，另以直的角度线，圆的螺旋角度，并加入时间因子注来预测市场走势。<strong>『价格的波动与时间的通过，必遵守角度的撑压关系。』这就是江恩理论 ！</strong></p>
<p>『江恩理论』的独特与神奇，即是加入时间的的运用，百年来，再无人出其右。他解开了时间价格循环、对应的秘密，这即是金融市场中自然律的『振动法则』(Law of Vibration)，并透过他多样独特的分析工具做最有效的运用。</p>
<p>在推展这个理论之初，1908年6月江恩回到华尔街成立他自己的经纪公司后，在1909 年10月，接受一家在二十年代初期很风行的金融杂志《报价与投资文摘》的编辑理查德德D.怀高，做专题的操作采访，这是一个由记者在现场，实际全程监看整个交易过程的采访，且期间长达一个月。这就是百年来让江恩追随者津津乐道的神奇操作！江恩在25个交易日中，进行了多空的286次操作，结果有264次获利，只有22次是亏损的，他的操作资金到月底时，暴增到百分之1000%。这不仅仅震撼了在场监看的杂志记者，这样不可思议的操作绩效，不但是前无古人，至今亦未有来者。这样的纪录也撼动了华尔街，评论家、媒体纷纷撰文报导这个开创股票分析新观念，开始崭露头角的先行者，从而开始了『江恩理论』的千秋时代。</p>
<p>研究技术分析的人都知道『江恩理论』（Gann Theory），不过多数人却不是很了解江恩理论，因为这部分的书与资料在国内真不是很多。所幸，拜科技之赐，我们现在可以很容易在网络上找寻到许多信息，但是找到是一回事，看懂、学习像又是另一回事。</p>
<p>江恩以几何、星相及数学的概念、发展出两套分析系统，都非常有效的应用在操作上，造就了江恩在华尔街辉煌、多采多姿的一生。这两套分析系统分别是江恩角及基准图。</p>
<p>脍炙人口的江恩角大家应不陌生，几乎在所有的分析软件中都有它，笔者这里就不赘言这部分。另一套是基准图的分析系统，在当时是江恩的特别课程，学费非常高昂，而且学员上完课后还不能向外人说，所以现在一般的江恩的书籍中是看不到基准图的介绍，这些都在江恩的特别课程教材中。笔者在1993年一个机缘中接触到这部分，当时的环境，江恩理论的数据更是绝少流通在上场上，更别说是基准图的部分了。</p>
<p><strong>江恩基准图</strong></p>
<p>江恩基准图包含有方的矩阵图、圆的轮中之轮与六角形、三角形，其中方形的矩阵图是所有基准图的基础。<br>
<img src="https://blog.elex.vip/post-images/1731578797247.png" alt="" loading="lazy"><br>
<img src="https://blog.elex.vip/post-images/1731578801904.png" alt="" loading="lazy"><br>
『矩阵图』是江恩理论中最简易明确的技术分析，是江恩一直致力使用的推算工具，堪称是江恩一生的精华，江恩理论的精髓。一张四方形的数字图，其中竟隐含了所有金融商品的进退趋势 (当然也包括股票) ，此图可以说，可推算所有有关数字的东西。</p>
<p>美国小说家，索尔.贝娄说：『老朽的生命疲竭，而新的形式尚未出现，人们彷佛在沙漠逡巡探勘，努力找寻新的形式。』这句话用于现在的技术分析领域里，显得非常贴切。行情的变化往往于瞬息间，很多投资人每天都在猜猜看，当然，猜对了有奖！可是有多少人猜中大奖？又有多少人能连续猜对？</p>
<p>任何有心于市场的投资人都知道，要想存活于市场绝非问问明牌、看看上市公司相关财务报表数据，或简单学个技术分析、画画线、瞄瞄指标就可以掌握行情，可以傲视且屹立于市场！如果这么简单人人都赚翻了，也不会猜对十次，还不够错一次大的。有一句话很好：『市场的钱赢不完，口袋里的钱却输得完。』</p>
<p>长久以来技术分析工作者、投资大众，不论新手老手，一直在找寻一种简单明白、快速有效的分析工具，却愈迷失在多如牛毛的技术指标、深奥的理论与复杂的线形中。尤其拜科技之赐，现在的图形分析几乎全在计算机上进行。计算机图之速度，自是手工绘图所望尘莫及的，但计算机图常见的盲点在于只能参考过去的线形，无法切划未来较长的行进方向 (边度不够) ；此外受限于计算机硬件的规格，或因软件程序功能的限制与压缩图形往往失真及变形，并不能做为推算依据。以一般技术分析软件上常使用的江恩角为例，根本形同虚设。</p>
<p>因为：『江恩角必需架立在矩形图上才能使用，现在的计算机图都是略长形较多，更别说这套软件的程序，也要是专为架设江恩角写的，且使用江恩独特的线形图。』现在大部份技术分析软件都不符合这样的条件，是无法作用的。许多人不知道也用得很有意思（等有了问题才奇怪江恩角不好用？），这是盘后技术分析软件该检讨的问题，也是使用者应知道的事。</p>
<p>其实，每一种技术分析的指标及理论，都有其学习与参考的价值，问题是绝大多数都无法提供我们对未来行情变化的肯定。哈佛工商评论 ( Harvard Business Review ) 之研究报告指出：『要做到高获利的持有股票，这类指南的正确性必须高达80%以上，可惜这些掌握市场趋势的专家们无法办到。』是的，现在普遍所使用的技术指标，确实无法达到上述目标，因为这些指针，大都只是依现在的行情变化而被动的变化。难道技术分析的领域里，没有一种指标是超前的、确定的？</p>
<p>不！不是这样的，您要相信，当出现一个问题，就有一个解决的方法；有一个疑问，就有一个答案。天地之间，一定存在一种均衡的力量。我们现在不能突破困惑，那只是我们还没发现突破的缺口，绝不是不存在！在乍逢江恩理论之时，就有这样的感觉，这分析工具绝对是一种新的生命形式。我在这些年间一直有一个疑问，『矩阵图』这么简单的东西，为什么相关数据如此欠缺？为什么没有广泛流通？我最后确定的答案： 『就是太简单了！』</p>
<p>我们从懂事开始，从懂得分辨善恶好坏开始，从懂得思考开始，我们就随着成长所增长的“智慧”而愈复杂起来，简单的东西反而是不予置信、不屑一顾的。在金融市场上，也是有许多人不相信有这么简单的分析工具，于是视若无睹，束之高阁。我能有机会写这本书，该要感谢那些专注于江恩理论中较复杂面的研究者，因为他们汲汲于较复杂的层面，无暇兼顾全面，才能让我有机会将最简易的『江恩矩阵图』递交给有缘者，给有心凭持着技术分析以屹立于金融市场的新生命，及坚执要找寻到，最终极的技术分析的您。</p>
<p>自然学派的分析认为：『大自然的一切变化，大自新宇宙的形成、星体运转，小至环境、个人，或高昂或低沈，皆有其脉络依循。任何人为的市场变化，无论盛衰荣枯、起伏变化，均在大自然律动中，以有形确定的方向行进，不会在毫无征兆、无预警的情况下，产生不规则的乱象。』</p>
<p>『矩阵图』的应用即基于此等理论，将各个不规则的曲线简化成数字，克服了线形和指标中的盲点，从而在规律的脉动中，克服心理弱点、克服人为的陷阱，看到方向。在预警的征兆中提醒您及时动作，这些在矩阵图中都可以轻易做到。</p>
<p><strong>只须观察矩阵图角度区域数字的对应现象， 就可轻易的分析商品趋势，且明确显示未来价位区。</strong></p>
<p>没有比这还要轻松简单的技术分析了。 准备好进入『江恩矩阵图』神妙的世界了吗？ 准备好开启新的生命了吗？唯一的规则，请带着最简单的心、最单纯的思维。 <strong>永远不要忘了『最简单的道理，才是世间最伟大的真理』。</strong><br>
<img src="https://blog.elex.vip/post-images/1731579175455.png" alt="" loading="lazy"><br>
<strong>请对照附图</strong></p>
<p>此一矩阵图上面有四条线分别为： 左右两条对角的交叉线 (即江恩成名的45度角) 一条直的垂直线 一条横的水平线 四条线交集的中心『 1 』即是数字的起点称为『基数』。 『 1 』为基数起点，呈螺旋状，从九点钟位置由左至右顺时针方向旋转2、3、4、5、6、7、8、9、10、11、12 ……</p>
<p>这四条线将图分成：四个正方区域 八个等腰三角形区域 两条对角的交叉线：为支撑及压力区 (以下简称角线) 垂直线和横的水平线：为多空交战区亦为动能区 (简称十字线)。<br>
★ 请注意‧刚好位在这四条在线的每一数目字， 它们都是矩阵图中相当重要的关键数字。</p>
<p>A、角线 (由左下角至右上角)<br>
361‧289‧225‧169‧121‧81‧49‧25‧9‧1‧5‧17‧37‧65‧101‧145‧197‧257‧325</p>
<p>B、角线 (由左上角至右下角)<br>
307‧241‧183‧133‧91‧57‧31‧13‧3‧1‧7‧21‧43‧73‧111‧157‧211‧273‧343</p>
<p>C、水平线 (由左至右)<br>
298‧233‧176‧127‧86‧53‧28‧11‧2‧1‧6‧19‧40‧69‧106‧151‧204‧265‧334</p>
<p>D、垂直线 (由上至下)<br>
316‧249‧190‧139‧96‧61‧34‧15‧4‧1‧8‧23‧46‧77‧116‧163‧218‧281‧352</p>
<p>以上这些数字，就是在矩阵图上进行演算的基础。</p>
<p>这些数字在各个角度区间产生互相吸引或排斥的力量！这样互相吸引、排斥的现象，即是造成上涨、下跌的力量，此种关系明确反应于四条在线，故可简单的循线推算每一只股票近、远期的价位，尤其是可简易推算中长线趋势，我们称为『大数推算』，这在下一章中会做详细说明。</p>
<p>『矩阵图』之技术分析，其异于市场上所习用的各项技术指针，与传统曲线的线路图之处，在于矩阵图是以角度上的数字显示路径。以上所有的数字永远是固定的、顺序的、规律的排列。我们才可以清楚的分析股价的未来行进路径，不会迷失在各种复杂的线形里。</p>
<p>市场行情的变化，皆在一瞬间产生，股价上下波动的同时，亦在波动我们的情绪和判断的思路。我们被这些不能自主的变化影响，因此时而疑惑犹豫，时而肯定乐观。在我们情绪低落懊悔时，或喜悦振奋的同时，整个市场的多空气氛也是如此动荡，因而更激励股价的加速起伏，这就是股票市场多空争战曲折、动人之处。</p>
<p>行情是在瞬间发生的。但是我们要记得瞬间发生的动能，来自之前所累积的能量。之前，是说一分钟之前、是昨天或上个月之前；也就是说，这一分钟的价位，在前一分钟已有迹象显示；今天的价位，在今天之前已有征兆显示，波段的走势是更大动能的蓄积。问题是，我们如何在行情变化之前，从征兆里预测可能的波动范围？</p>
<p>简单一张数字图，就可堪破所有商品玄机！我时时感念江恩为我们留下的宝贵资产。身处金融商品市场十数年，眼看弱势之投资人，及有心投入市场的新鲜人，苦苦啃读各类投资书籍，费心、尽力学习最好的技术分析。听演讲、访明师，但是大部份人都持续在做事倍功半的事，不能真正拥有自己的利器。我深深体会！在这非理性又无情的市场中，没有属于自己的东西，是很难长久生存的。名嘴名师、基金经理人如此，法人大户、投信操盘、股票营业员如此，您也是如此，毫无侥幸可言。</p>
<p>因此我不敢藏私。在进入如何使用『矩阵图』之前，要请您注意，若已学习过其他技术分析，在学习『矩阵图』时，请把以前所学的分析方法先放置一旁，以“空杯”的心态进入，才会有干海绵强力吸收的效果，才不致浪费时间在各种分析的比较上。等掌握『矩阵图』的使用，还有兴趣再与别的分析法去做比较时，您将知道它和别的理论和指标是兼容的，却简易得太多了。</p>
<p>最后，当您对以前种种学习过的技术分析顿足叹息，或对现在『江恩矩阵图』的种种奥妙，点头微笑之时，请您也怀着对江恩感激的心。在这金融市场中百余年来，还有谁深研广究一种理论长达十年之久，在确定、掌握要诀后，才开始运用在实战操作上？而后又著作、编写教材长达四十年以上，来告诉投资人他如何洞悉行情的？又有谁肯在赚取了相当的财富后，还愿意告诉投资人他是用什么分析方式从市场赚到钱的？而不仅仅只是陈述一种操作理论而已，是真实的从市场赢得财富，这个人，是江恩。<br>
<img src="https://blog.elex.vip/post-images/1731579293547.png" alt="" loading="lazy"><br>
矩阵图2和矩阵图1是完全相同的图形，差异在介于角线与十字线之间的『辅线』。矩阵图2是我们平常使用最频繁的原图，注意『辅线』的使用功能。</p>
<p>辅线有四条线其作用为，分隔过大区域。</p>
<p>因为矩阵可至无限大，在正常状态下，数字至361是标准图形。 超越361以上时，要用辅线做为角线与十字线之间的『动能观察区。』请看『矩阵图2』，在右上角以785 ~ 799为例，中间的792即为动能缓冲观察区。</p>
<p>数目越过785，下一关卡点是799，位于中间辅在线的是792，观察当数目越过785到达792时的力量是否充沛？是否能够继续上攻，或者须要换手、休息？这里的换手、休息并非回调，通常是越过785后应以785为支撑；抑或越过785后直上799，碰压力后以792以上为小型的支撑区，如此则表示力道强劲，有再冲高能力。</p>
<p>另一种相反的情形是，突破785后并未到792就回落。在技术上就可以判定这785是站不稳的，因为突破一个压力时，上冲的力量，必须足够到达动能缓冲区，若只是通过角度而已，并非有力突破，我们就可判断这是一个短线高点，而采取应有的动作，因此能让我们预防假突破与假跌破现象。这『辅线』的动能缓冲观察区观盘法，您要花一些时间做验证，才会有较深的体会 ( 可先在实时盘上对照验证 )。</p>
<p>如何以一张图表来推算所有金融商品的秘诀</p>
<p>我们知道各商品的价值不同，其价位表现亦不同，指数有到5位数以上的，股价有个位数的，外汇有小数点，如何在一张图表上统一使用？</p>
<p>诀窍就是将数字缩小、放大百分比来使用。</p>
<p>基本上我们最常使用的比例依序是 100:1、10:1及 1:1。</p>
<p>使用于指数时须缩小百分比 ( 过小数字可放大百分比 ) ，否则数字图形过大使用会不方便。所附之『矩阵图 2』数字才961点，已这么大张。加权指数高点有10,000点以上，想想这么大一张图怎么携带？我曾做过100cm×100cm数字达9,800的大型图，张贴在墙壁上倒像是挂图。 (实际上是用在时间计算上的) 以大多数的商品来说，这961点的矩阵图足够正常使用了。</p>
<p>缩小百分比： 小數点无条件舍去</p>
<ul>
<li>A 、上证指數6124 缩小百分比10:1 约为612 缩小百分比100:1约为61</li>
<li>B 、深圳成指19600 缩小百分比10:1 约为 196012 缩小分比100:1约为 196</li>
<li>C 、道琼指數18351 缩小百分比10:1 约为1851 缩小百分比100:1约为183</li>
</ul>
<p>放大百分比：</p>
<ul>
<li>A、平安银行股价5.05 可放大百分比1：10约为 50</li>
<li>B、万科股价 3.12 可放大百分比1：10约为31</li>
<li>C、浦发银行股价6.41 可放大百分比1：10约为 64</li>
</ul>
<p>缩小及放大百分比100：1与10：1，在矩阵图上的落点，于角度在线是看不出对应关系；但，仍可在角度在线看到分别的对应及撑压关系。使用观念在于各商品的数字，其所对应的撑压是独立的，其循环性亦是独立的。或许有时我们会发现，商品与商品之间的循环或走势，有其相关性的连结，但其特性仍是各个独立的。也就是说，当我们使用100：1时，其走势的撑压及对称是一种关系；使用10：1时又呈现另一种关系，它们不会互相干扰，所以我们可以分开或放在一起使用。当然，在做一较长趋势的判断时，我们通常是先看『大数』 ( 1~361基础角度线的使用 ) 。大数一般以100：1的使用已足够；再以10：1做短期的撑压推算，这部份我们会在后面做说明及推演。</p>
<p>放大、缩小百分比的应用，主要是在矩阵图上有更大的翱翔空间。如果任何商品都以1：1来做推算，也就是一格一点的看，那这张矩阵图得有多大？请记得，除了时间推算之外，所有的价格（指数）的推算，我们都可以用增减百分比的方式来做最好的使用。尤其是现在的鸡蛋水饺股就是用1：1也没办法看，但若以增大百分比的方式，它又是一尾活龙。</p>
<p>如某股2.57元，在矩阵图上放大百分比为257，这价位在A3角，顺时针往前看为上涨压力，下一角线是A4角的273。好，现在您是不是很轻松的就可以知道它短线在2.73元有压力。看远一点就再往下一角线看，下一角线为A1角的289，以A3角位置直接看A1角，就是一个180度的角线对角线（257~289，约0.3元）。</p>
<p>下跌呢？从257的A3角往A2角方向移动，A2角位置是241，就是2.41元有支撑。如果也以角线对角线来看，还是直接看A1角的225，那2.25即为一个对称角度的支撑。这就是百分比增大时很好使用的例子，其观盘法及角度线的使用技巧在后面都会做更详尽说明。以下为矩阵图简单看线形使用之角度线代号。从左下角开始，顺时钟方向。</p>
<p>角度线代号： 角线为A1 - A2 - A3 - A4 。 辅线为B1 - B2 - B3 - B4 - B5 - B6 - B7 - B8 。 十字线为C1 - C2 - C3 - C4 。<br>
<img src="https://blog.elex.vip/post-images/1731579498158.png" alt="" loading="lazy"><br>
<img src="https://blog.elex.vip/post-images/1731579504039.png" alt="" loading="lazy"><br>
基础看图法</p>
<p>基础看图法包含两大部份：<br>
<strong>A、大数推算</strong>--中长线的趋势推算法</p>
<ol>
<li>主基数推算：以历史大波段高、低点为基点的对应推算。</li>
<li>次级/次要基数推算：以次级波段高、低点为基点的对应推算。<br>
<img src="https://blog.elex.vip/post-images/1731579543992.png" alt="" loading="lazy"></li>
</ol>
<p><strong>B、基础角度线推算</strong>--短中线、波段的推算法</p>
<ul>
<li>整个基础角度线的使用有三大项：</li>
</ul>
<ol>
<li>大数趋势分析后，分割段落区间的使用</li>
<li>16条线都要看</li>
<li>短波段及波段的推算使用<br>
<img src="https://blog.elex.vip/post-images/1731579587351.png" alt="" loading="lazy"><br>
角线之前的撑压观察区<br>
<img src="https://blog.elex.vip/post-images/1731579596793.png" alt="" loading="lazy"><br>
角线与角线之间的关系<br>
<img src="https://blog.elex.vip/post-images/1731579603064.png" alt="" loading="lazy"></li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[番外篇——成功率100%的通达信指标公式，你敢相信吗？]]></title>
        <id>https://blog.elex.vip/post/fan-wai-pian-cheng-gong-lu-100de-tong-da-xin-zhi-biao-gong-shi-ni-gan-xiang-xin-ma/</id>
        <link href="https://blog.elex.vip/post/fan-wai-pian-cheng-gong-lu-100de-tong-da-xin-zhi-biao-gong-shi-ni-gan-xiang-xin-ma/">
        </link>
        <updated>2024-11-14T09:53:02.000Z</updated>
        <content type="html"><![CDATA[<p><img src="https://blog.elex.vip/post-images/1731578056884.png" alt="" loading="lazy"><br>
前几天，有人问能不能把通达信副图公式改成选股公式。我把指标公式加载到副图（如上图），发现这个指标真是牛了，成功率100%，发出信号的之后两天，总是能涨。难道找到了交易的圣杯，如果按照这样的成功率，即使每次盈利只有1%，不出几年就可以脚踢巴菲特，拳打索罗斯了。真的有这种好事吗？</p>
<p>代码如下：</p>
<pre><code class="language-plaintext">暴好用:=EMA(CLOSE,60)-EMA(CLOSE,300);
指标公式:=EMA(暴好用,300);
BBSS1:=(CLOSE-LLV(LOW,8))/(HHV(HIGH,8)-LLV(LOW,8))*100;
BBSS4:SMA(BBSS1,2,1);
BBSS5:SMA(BBSS4,2,1);
BBSS6:=CLOSE/REF(CLOSE,3)&gt;=1.1;
BBSS7:=BACKSET(BBSS6,3);
暴利:IF((BBSS7 AND COUNT(BBSS7,3)=1),30,0),COLORYELLOW,LINETHICK3;
DRAWTEXT(暴利,35,'暴利 '),COLORYELLOW,LINETHICK3;
</code></pre>
<p>仔细研究了这段代码，发现上面的几句代码都是废话，删除对交易信号并没有影响。此外这几句废话，看起来很眼熟，接下来就来分析一下。</p>
<p>一、通达信指标公式代码分析</p>
<ol>
<li>首先前两句，其实是获得MACD的DIF和DEA值，只不过参数改了、变量名重新命名了而已。可以打开通达信上自带的MACD指标对比一下。（MACD指标代码如下图）这两句都是冒号等于（:=），不会在副图上画出来。再看变量名“暴好用”和“指标公式”，后面的代码中也没有用到，所以这两句代码可以直接删除，对指标公式并没有任何影响。</li>
</ol>
<pre><code class="language-plaintext">暴好用:=EMA(CLOSE,60)-EMA(CLOSE,300);
指标公式:=EMA(暴好用,300);
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731578115073.png" alt="" loading="lazy"><br>
2. 再看接下来三句，又是非常眼熟，其实是KD指标（代码如下图）。把KD指标默认的参数换成了(8,2,2)，我们也重新设置参数，设置之后，对比发现，完全一样。变量名BBSS1、BBSS4、BBSS5后面的代码也没有用到，对产生的信号没有影响，这三句也可以直接删除。</p>
<pre><code class="language-plaintext">BBSS1:=(CLOSE-LLV(LOW,8))/(HHV(HIGH,8)-LLV(LOW,8))*100;
BBSS4:SMA(BBSS1,2,1);
BBSS5:SMA(BBSS4,2,1);
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731578132176.png" alt="" loading="lazy"><br>
<img src="https://blog.elex.vip/post-images/1731578167855.png" alt="" loading="lazy"><br>
3. 再看最后一句，DRAWTEXT在之前的文章讲过了，是标记函数，在产生信号的地方写文字，对信号的产生没有影响，可以直接删除这句代码。</p>
<p>删除没用的代码，只剩下三句代码起作用。很不幸的是，这三句代码只是用来忽悠人的。</p>
<pre><code class="language-plaintext">BBSS6:=CLOSE/REF(CLOSE,3)&gt;=1.1;
BBSS7:=BACKSET(BBSS6,3);
暴利:IF((BBSS7 AND COUNT(BBSS7,3)=1),30,0),COLORYELLOW,LINETHICK3;
</code></pre>
<p>“暴利”这一句还可以继续精简，把精简的指标加载到副图，发现结果是一样的。当然这个变量名“暴利”有点讽刺。</p>
<pre><code class="language-plaintext">BBSS6:=CLOSE/REF(CLOSE,3)&gt;=1.1;
BBSS7:=BACKSET(BBSS6,3);
暴利:BBSS7 AND COUNT(BBSS7,3)=1;
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731578208767.png" alt="" loading="lazy"><br>
接下来看看这个指标是如何忽悠人的，下面对这三句核心代码进行解析。</p>
<h2 id="二-核心代码解析">二、核心代码解析</h2>
<ol>
<li>BBSS6:=CLOSE/REF(CLOSE,3)&gt;=1.1;，这一句表示当前的收盘价除以三天前的收盘价大于等于1.1，也就是说最近三天的涨幅大于等于10%，如果这个条件成立，BBSS6的值就是1，否则就是0；<br>
<img src="https://blog.elex.vip/post-images/1731578276951.png" alt="" loading="lazy"></li>
<li>BBSS7:=BACKSET(BBSS6,3);，这一句用到了BACKSET，BACKSET是未来函数，BACKSET(BBSS6,3)表示BBSS6为1时，把最近三根K线对应的BBSS7的值设为1。（为了避免和最近三天涨幅大于等于10%混淆，这里把最近三天换成最近三根K线）</li>
</ol>
<p>上面提到过，最近三天涨幅大于等于10%，BBSS6的值才是1，只会产生一个信号。但是现在经过给BBSS7赋值，只要BBSS6满足条件，就可以让最近3根K线产生3个信号。（如下图）<br>
<img src="https://blog.elex.vip/post-images/1731578288030.png" alt="" loading="lazy"><br>
3. BL:BBSS7 AND COUNT(BBSS7,3)=1;，这一句中COUNT(BBSS7,3)=1，就是统计最近3天满足BBSS7的天数为1。这样限制之后，只会在最近三根K线中的第一根产生信号。<br>
<img src="https://blog.elex.vip/post-images/1731578308109.png" alt="" loading="lazy"><br>
最后总结一下，这个虚假的信号其实是建立在最近三天涨幅大于等于10%这个已经发生的事实之上，然后往前推两天发出信号。这有点像什么呢？就像我们交易的过程中，发现这只票已经涨了很多，然后我们再找各种理由分析这只票。因为已经涨了，我们无论用什么方法来分析都是对的，这就叫后见之明吧。</p>
<p>通达信指标公式中如果使用了未来函数，在窗口的左下角会提示“用到未来数据”。对于成功率很高的指标公式，大家在使用时不要被结果蒙蔽了。<br>
<img src="https://blog.elex.vip/post-images/1731578334419.png" alt="" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[第二十八篇——一通达信板块函数INSUM、BLOCKSETNUM简介以及应用（从零起步编写通达信指标公式系列）]]></title>
        <id>https://blog.elex.vip/post/di-er-shi-ba-pian-yi-tong-da-xin-ban-kuai-han-shu-insumblocksetnum-jian-jie-yi-ji-ying-yong-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/</id>
        <link href="https://blog.elex.vip/post/di-er-shi-ba-pian-yi-tong-da-xin-ban-kuai-han-shu-insumblocksetnum-jian-jie-yi-ji-ying-yong-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/">
        </link>
        <updated>2024-11-14T09:47:01.000Z</updated>
        <content type="html"><![CDATA[<p><strong>有人问</strong>：统计指数成分股的收盘价高于20日均线的数量占比（0%~100%），如何编写成副图指标？</p>
<p>这种指标公式属于代码不多，难度不小的类型。如果平时编写板块方面的指标比较少，相关板块函数不常用，那需要花点时间研究。</p>
<h2 id="一-所需函数">一、所需函数</h2>
<h3 id="1-stkname">1、STKNAME</h3>
<p>含义：获取品种名称</p>
<h3 id="2-hyblock">2、HYBLOCK</h3>
<p>含义：获取品种所属行业板块</p>
<h3 id="3-blocksetnum">3、BLOCKSETNUM</h3>
<p>含义：统计板块的成分股数量<br>
使用方法：BLOCKSETNUM(板块名称)</p>
<h3 id="4-insum">4、INSUM</h3>
<p>含义：获得板块成分股对应指标的计算值<br>
使用方法：<br>
INSUM(板块名称,指标名称,指标线,计算类型)</p>
<p>板块名称：支持系统自带的板块，也支持自定义板块。除了支持字符串，还支持上面介绍过的STKNAME、HYBLOCK这样的变量来获取板块名称，当切换查看的板块时，指标的数据会自动变化。</p>
<p>指标名称：支持系统自带的指标，也支持自编指标</p>
<p>指标线：1表示指标的第一个输出值，2表示指标的第二个输出值，以此类推</p>
<p>计算类型：0表示累加，1表示平均数，2表示最大值，3表示最小值</p>
<p>举例：INSUM('半导体','MACD',3,0);，表示半导体板块中所有成分股的MACD指标第三个输出即MACD值的累加值。（如下图画线处，第一个输出值是DIF，第二个输出值是DEA，第三个输出值是MACD）<br>
<img src="https://blog.elex.vip/post-images/1731577749612.png" alt="" loading="lazy"></p>
<h2 id="二-指标编写">二、指标编写</h2>
<p>思路：</p>
<ol>
<li>统计指数包含的成分股总数</li>
<li>统计指数的成分股中收盘价高于20日均线的数量</li>
<li>然后求占比</li>
</ol>
<h3 id="1-引用公式">1、引用公式</h3>
<p>在步骤2中，用到INSUM函数，INSUM函数需要用调用指标来计算收盘价高于20日均线的数量，但是系统没有自带这样的指标，所以需要我们自己新建，源码如下：</p>
<pre><code class="language-plaintext">IF(C&gt;MA(C,20),1,0);
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731577812440.png" alt="" loading="lazy"><br>
公式名称为“高于20日均线”，在主指标公式中会用到这个名称，如果修改了名称，需要在主公式中同步修改。<br>
<img src="https://blog.elex.vip/post-images/1731577825916.png" alt="" loading="lazy"></p>
<h3 id="2-主公式">2、主公式</h3>
<p>引用公式保存之后，再新建主公式，源码如下：</p>
<pre><code class="language-plaintext">A1:=BLOCKSETNUM(STKNAME);
A2:=INSUM(STKNAME,'20均线以上',1,0);
BL:A2/A1*100;
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731577856951.png" alt="" loading="lazy"><br>
以沪深300、中证500为例，效果如下图。<br>
沪深300指数<br>
<img src="https://blog.elex.vip/post-images/1731577871199.png" alt="" loading="lazy"><br>
中证500指数<br>
<img src="https://blog.elex.vip/post-images/1731577879432.png" alt="" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[第二十七篇——一阳穿三线选股指标公式，简单却实用（从零起步编写通达信指标公式系列）]]></title>
        <id>https://blog.elex.vip/post/di-er-shi-qi-pian-yi-yang-chuan-san-xian-xuan-gu-zhi-biao-gong-shi-jian-dan-que-shi-yong-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/</id>
        <link href="https://blog.elex.vip/post/di-er-shi-qi-pian-yi-yang-chuan-san-xian-xuan-gu-zhi-biao-gong-shi-jian-dan-que-shi-yong-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/">
        </link>
        <updated>2024-11-14T09:37:02.000Z</updated>
        <content type="html"><![CDATA[<p><strong>内容提要</strong>：一阳穿三线，顾名思义就是一根阳线上穿了三条均线。看图比较直观，如下图箭头处的K线。<br>
<img src="https://blog.elex.vip/post-images/1731577132497.png" alt="" loading="lazy"></p>
<h2 id="一-一阳穿三线选股指标公式">一、一阳穿三线选股指标公式</h2>
<p>一阳穿三线选股指标公式编写思路还是比较简单的，首先需要定义三条均线，然后比较得出这三条均线的最大值和最小值，最后限定K线的收盘价大于均线最大值，K线的开盘价小于均线最小值，这样就实现了K线的实体部分上穿了三条均线。</p>
<pre><code class="language-plaintext">N1:=5;
N2:=10;
N3:=20;
MA1:=MA(C,N1);
MA2:=MA(C,N2);
MA3:=MA(C,N3);
MAXMA:=MAX(MAX(MA1,MA2),MA3);{三条均线的最大值}
MINMA:=MIN(MIN(MA1,MA2),MA3);{三条均线的最小值}
XG:C&gt;MAXMA AND O&lt;MINMA;{收盘价大于均线最大值，开盘价小于均线最小值};
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731577148386.png" alt="" loading="lazy"><br>
<img src="https://blog.elex.vip/post-images/1731577154927.png" alt="" loading="lazy"></p>
<h2 id="二-信号过滤">二、信号过滤</h2>
<p>通过查看产生的信号，可以发现当三条均线非常接近的时候，一些小阳线也满足条件，这不是我们想要的。（如下图红色箭头处）<br>
<img src="https://blog.elex.vip/post-images/1731577169075.png" alt="" loading="lazy"><br>
可以在公式中，增加限制阳线实体涨幅的条件，对信号进行过滤。比如阳线实体涨幅大于3%，即C/O&gt;1.03，即可过滤小阳线。这个涨幅可以根据自己的要求自行设定。</p>
<pre><code class="language-plaintext">N1:=5;
N2:=10;
N3:=20;
MA1:=MA(C,N1);
MA2:=MA(C,N2);
MA3:=MA(C,N3);
MAXMA:=MAX(MAX(MA1,MA2),MA3);{三条均线的最大值}
MINMA:=MIN(MIN(MA1,MA2),MA3);{三条均线的最小值}
XG:C&gt;MAXMA AND O&lt;MINMA AND C/O&gt;1.03;
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://blog.elex.vip/post-images/1731577199563.png" alt="" loading="lazy"></figure>
<h2 id="三-主图叠加指标公式">三、主图叠加指标公式</h2>
<p>上面的公式可以保存成为副图指标，也可也直接保存为条件选股公式。如果要加载到主图上，需要做一些修改。均线需要写为:，这样才能在主图上显示均线。在用DRAWICON函数，把信号标注出来。</p>
<pre><code class="language-plaintext">N1:=5;
N2:=10;
N3:=20;
MA1:MA(C,N1);
MA2:MA(C,N2);
MA3:MA(C,N3);
MAXMA:=MAX(MAX(MA1,MA2),MA3);{三条均线的最大值}
MINMA:=MIN(MIN(MA1,MA2),MA3);{三条均线的最小值}
DRAWICON(C&gt;MAXMA AND O&lt;MINMA AND C/O&gt;1.03,L,1);
</code></pre>
<p>为了在主图显示，下图中红色箭头处做了修改。画线方法选择“主图叠加”。<br>
<img src="https://blog.elex.vip/post-images/1731577229272.png" alt="" loading="lazy"><br>
<img src="https://blog.elex.vip/post-images/1731577234388.png" alt="" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[第二十六篇——均线粘合突破选股指标公式怎么写？（从零起步编写通达信指标公式系列） ]]></title>
        <id>https://blog.elex.vip/post/di-er-shi-liu-pian-jun-xian-nian-he-tu-po-xuan-gu-zhi-biao-gong-shi-zen-me-xie-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/</id>
        <link href="https://blog.elex.vip/post/di-er-shi-liu-pian-jun-xian-nian-he-tu-po-xuan-gu-zhi-biao-gong-shi-zen-me-xie-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/">
        </link>
        <updated>2024-11-14T09:30:04.000Z</updated>
        <content type="html"><![CDATA[<p><strong>内容提要</strong>：今天给大家介绍如何编写均线粘合突破选股指标公式，其实本文内容并不局限于突破，而是均线粘合加启动点。首先需要找到均线粘合，然后对信号进行过滤，再加上一些条件，找到启动点。</p>
<h2 id="一-均线粘合">一、均线粘合</h2>
<p>均线如果没有特指，一般是MA简单移动平均线，MA(X,N)为X的N日简单移动平均。以MA5、MA10、MA20、MA30四条均线为例，随着行情震荡，这四条均线越来越接近，表现为均线粘合。编写均线粘合的思路是如果这四条均线的最大值与最小值能约束在一个很小的范围内，即可找出均线粘合。<br>
<img src="https://blog.elex.vip/post-images/1731576718762.png" alt="" loading="lazy"></p>
<pre><code class="language-plaintext">N1:=5;
N2:=10;
N3:=20;
N4:=30;
M:=0.01;

MA1:=MA(C,N1);
MA2:=MA(C,N2);
MA3:=MA(C,N3);
MA4:=MA(C,N4);

MAXJX:MAX(MAX(MA1,MA2),MAX(MA3,MA4));{求四条均线最大值}

MINJX:MIN(MIN(MA1,MA2),MIN(MA3,MA4));{求四条均线最小值}

DRAWICON(MAXJX/MINJX-1&lt;M,MINJX,1);{均线最大值最小值幅度小于1%，画红箭头};
</code></pre>
<p>这里以最大值与最小值之间的幅度为1%举例，即M:=0.01;，如果觉得条件太苛刻，可以自行修改。N1、N2、N3、N4为均线的参数，在上面的公式中分别为5、10、20、30，均线参数也可以自行修改。加载到副图，可以看到信号太多了，后面会介绍怎么过滤。<br>
<img src="https://blog.elex.vip/post-images/1731576745529.png" alt="" loading="lazy"><br>
之前有人问，五条均线粘合怎么写。我们先来看四条均线，以MAX为例，四条均线比较出最大值，可以先进行两两比较，最终得到最大值。<br>
比较得出最大值有两种写法，结果是一样的：</p>
<p>第一种，先比较MA1和MA2，得到的最大值再与MA3比，得到的最大值再与MA4比，最终得到这四条均线的最大值。<br>
<img src="https://blog.elex.vip/post-images/1731576760908.png" alt="" loading="lazy"><br>
第二种，先比较MA1和MA2，MA3和MA4，分别得到最大值，再进行比较，最终得到这四条均线的最大值。<br>
<img src="https://blog.elex.vip/post-images/1731576774100.png" alt="" loading="lazy"><br>
五条均线可以依葫芦画瓢，套娃就行了。</p>
<pre><code class="language-plaintext">MAXJX1:MAX(MAX(MAX(MAX(MA1,MA2),MA3),MA4),MA5);
MAXJX2:MAX(MAX(MAX(MA1,MA2),MAX(MA3,MA4)),MA5);
</code></pre>
<h2 id="二-信号过滤">二、信号过滤</h2>
<p>上面介绍的均线粘合公式，初始条件比较简单，导致信号太多，如果有些信号明显不是我们想要的，可以过滤掉。比如如果不想在下跌趋势出现信号，可以加一条大周期均线，下跌趋势行情一般会在大周期均线下方运行，过滤掉即可。当然这样会过滤掉一些机会，看自己的取舍吧。我这里加了一条MA120均线，收盘价在MA120均线上方才提示信号。下图对比发现，对于明显的下跌趋势，过滤效果还是不错的。此外可以对信号进行复盘，进行进一步过滤。<br>
<img src="https://blog.elex.vip/post-images/1731576800684.png" alt="" loading="lazy"></p>
<h2 id="三-寻找启动点">三、寻找启动点</h2>
<p>找到均线粘合的震荡行情并不是我们的终极目标，我们希望找到均线粘合之后行情的启动点，可以通过放量、大阳线、突破前高、均线拐头向上、均线发散等条件来找到。但是要注意，需要先找到均线粘合，再找到启动点，均线粘合和启动点一般不在同一天。</p>
<p>以下图为例，箭头处的K线突破了前高，但是此时却已经不满足均线粘合的条件，如果用AND让均线粘合和突破前高同时成立，那么就不会出现信号。用COUNT函数统计最近几天出现过均线粘合，并且当天突破前高，这样可以出现信号。<br>
<img src="https://blog.elex.vip/post-images/1731576812797.png" alt="" loading="lazy"><br>
下面就把这些条件综合起来，写出均线粘合突破选股指标公式（均线粘合+启动点）：</p>
<pre><code class="language-plaintext">N1:=5;
N2:=10;
N3:=20;
N4:=30;
N5:=120;
M:=0.01;

MA1:=MA(C,N1);
MA2:=MA(C,N2);
MA3:=MA(C,N3);
MA4:=MA(C,N4);
MA5:=MA(C,N5);

MAXJX:=MAX(MAX(MA1,MA2),MAX(MA3,MA4));{求四条均线最大值}
MINJX:=MIN(MIN(MA1,MA2),MIN(MA3,MA4));{求四条均线最小值}

A1:=COUNT(MAXJX/MINJX-1&lt;M,10)&gt;=1;{统计最近10个交易日至少出现过一次均线粘合}
A2:=C&gt;MA5;{收盘价在120日均线之上}
A3:=C&gt;REF(HHV(H,20),1);{收盘价突破20日高点}
A4:=C/REF(C,1)&gt;1.03;{涨幅大于3%}
A5:=VOL&gt;MA(VOL,5);{成交量大于5日均量}
A6:=MA1&gt;MA2 AND MA2&gt;MA3;{5、10、20均线发散多头排列}
A7:=MA1&gt;REF(MA1,1);{5日均线拐头向上}

XG:A1 AND A2 AND A3 AND A4 AND A5 AND A6 AND A7;
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731576897071.png" alt="" loading="lazy"><br>
<img src="https://blog.elex.vip/post-images/1731576903356.png" alt="" loading="lazy"><br>
公式中写了A1、A2、A3、A4、A5、A6、A7七个条件，写这么多条件只是为了拓宽大家的思路。如果自己编写指标，没必要使用这么多条件，条件太多可能会漏掉一些不错的信号。可以从中选择几个条件或者自行设置条件。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[第二十五篇——均线多头排列选股公式，选出均线多头刚起步的标的（从零起步编写通达信指标公式系列） ]]></title>
        <id>https://blog.elex.vip/post/di-er-shi-wu-pian-jun-xian-duo-tou-pai-lie-xuan-gu-gong-shi-xuan-chu-jun-xian-duo-tou-gang-qi-bu-de-biao-de-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/</id>
        <link href="https://blog.elex.vip/post/di-er-shi-wu-pian-jun-xian-duo-tou-pai-lie-xuan-gu-gong-shi-xuan-chu-jun-xian-duo-tou-gang-qi-bu-de-biao-de-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/">
        </link>
        <updated>2024-11-14T09:24:30.000Z</updated>
        <content type="html"><![CDATA[<p><strong>内容提要</strong>：均线多头排列选股公式总体还是比较简单的，写出均线，然后比较大小。为了做成选股公式，选出均线多头刚起步的，还需要做一些修改。另外为了方便自定义均线条数以及均线参数，介绍了两种改写方法。</p>
<h2 id="一-均线多头排列选股公式">一、均线多头排列选股公式</h2>
<p>比如5日、10日、20日三条均线多头排列</p>
<pre><code class="language-plaintext">MA5:=MA(C,5);
MA10:=MA(C,10);
MA20:=MA(C,20);
PL:MA5&gt;MA10 AND MA10&gt;MA20;{5日均线大于10日均线，10日均线大于20日均线}
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731576383447.png" alt="" loading="lazy"><br>
从上图可以发现，满足均线多头排列的周期数比较多，两个黄色箭头之间的周期都满足。如果用来选股，结果太多。选股一般只需要选出均线多头刚起步的即可，也就是说选出第一次满足均线多头排列的，因此需要加上一个限制条件。</p>
<p>以上图为例，第一次满足均线多头排列条件的时候，PL从0变成1，之后的几个周期都满足均线多头排列，所以PL一直是1。利用CROSS(PL,0.5)，PL从0变成1的时候要上穿0.5，这样就可以选出第一次满足均线多头排列。</p>
<pre><code class="language-plaintext">MA5:=MA(C,5);
MA10:=MA(C,10);
MA20:=MA(C,20);
PL:=MA5&gt;MA10 AND MA10&gt;MA20;
XG:CROSS(PL,0.5);
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://blog.elex.vip/post-images/1731576414108.png" alt="" loading="lazy"></figure>
<h2 id="二-自定义均线条数以及均线参数">二、自定义均线条数以及均线参数</h2>
<p>上面以三条均线举例，有的新手可能会问，四条均线多头排列怎么写，五条均线多头排列怎么写。另外以前为了方便举例，在指标公式编写过程中，把参数都固定了。比如上面的公式中，5日、10日、20日均线直接写出来了，如果想改为其他均线，修改也不方便。针对这两个问题，接下来介绍两种方法，方便进行自定义。</p>
<h3 id="1-设置参数">1、设置参数</h3>
<p>第一种方法是设置参数。均线写成MA1、MA2、MA3，这样想用几条均线就写几条，对应的参数就写成N1、N2、N3，比如MA1:=MA(C,N1);，参数在公式编辑器中设置，如下图。最小最大是设置参数的取值范围，缺省是设置默认参数。比如N1最小1，最大1000，缺省5，意思就是N1的取值范围是1——1000，N1如果不手动调整参数，默认就是5。这样对应的MA1均线就是5日均线。</p>
<pre><code class="language-plaintext">MA1:=MA(C,N1);
MA2:=MA(C,N2);
MA3:=MA(C,N3);
PL:=MA1&gt;MA2 AND MA2&gt;MA3;
XG:CROSS(PL,0.5);
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731576448936.png" alt="" loading="lazy"><br>
四条均线多头排列，加一条均线MA4即可。五条均线以此类推。<br>
<img src="https://blog.elex.vip/post-images/1731576458422.png" alt="" loading="lazy"></p>
<h3 id="2-参数写在公式开头">2、参数写在公式开头</h3>
<p>第二种方法，把参数写在公式开头。在指标公式编辑器上方设置参数不太方便，新建公式的时候需要手动输入。比如大家想复制公式源码，还要自己手动输入参数，有点麻烦。在公式开头写出参数，后期维护也比较方便，可以直接修改。</p>
<pre><code class="language-plaintext">N1:=5;
N2:=10;
N3:=20;
MA1:=MA(C,N1);
MA2:=MA(C,N2);
MA3:=MA(C,N3);
PL:=MA1&gt;MA2 AND MA2&gt;MA3;
XG:CROSS(PL,0.5);
</code></pre>
<p>以四条均线为例，五条均线以此类推。</p>
<pre><code class="language-plaintext">N1:=5;
N2:=10;
N3:=20;
N4:=30;
MA1:=MA(C,N1);
MA2:=MA(C,N2);
MA3:=MA(C,N3);
MA4:=MA(C,N4);
PL:=MA1&gt;MA2 AND MA2&gt;MA3 AND MA3&gt;MA4;
XG:CROSS(PL,0.5);
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://blog.elex.vip/post-images/1731576508898.png" alt="" loading="lazy"></figure>
<p>为了方便展示，文章中的源码保存为副图指标。但是这些源码可以直接保存成为均线多头排列选股公式。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[第二十四篇——如何编写均线斜率大于45度的公式（从零起步编写通达信指标公式系列） ]]></title>
        <id>https://blog.elex.vip/post/di-er-shi-si-pian-ru-he-bian-xie-jun-xian-xie-lu-da-yu-45-du-de-gong-shi-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/</id>
        <link href="https://blog.elex.vip/post/di-er-shi-si-pian-ru-he-bian-xie-jun-xian-xie-lu-da-yu-45-du-de-gong-shi-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/">
        </link>
        <updated>2024-11-14T09:18:45.000Z</updated>
        <content type="html"><![CDATA[<p><strong>内容提要</strong>：今天介绍两个与角度、斜率相关的通达信函数ATAN、SLOPE，并探讨编写均线斜率大于45度的通达信指标公式。这里说的均线斜率，实际上是均线的角度。</p>
<h2 id="一-atan函数">一、ATAN函数</h2>
<p>含义：求反正切值</p>
<p>使用方法：ATAN(X)获得X的反正切值，求得的反正切值是弧度制，为了方便理解，一般会转换成角度制。1弧度=180/π，约等于57.3度。π约等于3.14115926，编写指标的时候，换算一般写为180/3.14115926。<br>
<img src="https://blog.elex.vip/post-images/1731576096079.png" alt="" loading="lazy"><br>
根据斜率的定义，直线对x轴的倾斜角的正切值tanθ为该直线的斜率。如果我们知道了正切值tanθ，通过反正切函数ATAN就可以求得θ的角度。θ角度的取值范围在（-90°，90°）度之间。</p>
<p>但是在交易软件上，x轴是周期，y轴是价格，x、y值单位不同，没有可比性。我们通过下面两张图，可以发现问题所在。对于同样一段行情，当这一段行情放大的时候，我们一眼看上去，均线角度可能是45°。如果把这一段行情缩小，均线的角度发生了明细的变化，显然大于45°。这样均线的角度就没有意义，因为会随着K线图的放大缩小而产生变化。<br>
<img src="https://blog.elex.vip/post-images/1731576106076.png" alt="" loading="lazy"><br>
<img src="https://blog.elex.vip/post-images/1731576113319.png" alt="" loading="lazy"></p>
<pre><code class="language-plaintext">MA5:=MA(C,5);
ZF:=(MA5/REF(MA5,1)-1)*100;
JD:ATAN(ZF)*180/3.14115926;
</code></pre>
<p>使用通达信编程语言编写均线的角度，常见的做法是用均线的涨跌幅来近似替代正切值tan，</p>
<p>ZF:=(MA5/REF(MA5,1)-1)*100;，当均线涨幅为1%，ZF等于1，这时候求得的角度JD就是45度。但是每天的涨幅是有极限的，以主板涨停10%为例，即使连续涨停，ZF的最大值也就是10，计算得到JD最大值84.289。<br>
<img src="https://blog.elex.vip/post-images/1731576136026.png" alt="" loading="lazy"><br>
把指标加载到副图进行验证，可以看到JD的最大值基本上在80多，确实如我们所料。<br>
<img src="https://blog.elex.vip/post-images/1731576149184.png" alt="" loading="lazy"><br>
这样，均线角度大于45度的公式就可以写出来了。</p>
<pre><code class="language-plaintext">MA5:=MA(C,5);
ZF:=(MA5/REF(MA5,1)-1)*100;
JD:=ATAN(ZF)*180/3.14115926;
XG:JD&gt;45;
</code></pre>
<h2 id="二-slope函数">二、SLOPE函数</h2>
<p>除了用ATAN来计算角度、斜率，还有另外一个函数SLOPE。</p>
<p>使用方法：SLOPE(X,N) 获得线性回归斜率<br>
<img src="https://blog.elex.vip/post-images/1731576191696.png" alt="" loading="lazy"></p>
<pre><code class="language-plaintext">MA5:=MA(C,5);
XL:SLOPE(MA5,5);
</code></pre>
<p>线性回归斜率，可以简单理解为根据模型拟合出一条直线，计算这条直线的斜率。SLOPE(MA5,5)就是取最近5日的MA5值，然后拟合出直线，计算斜率。因为取的最近5日，所有反应会相对迟钝，5日均线刚刚向上拐头的时候，计算的斜率可能还是负的。</p>
<p>这个SLOPE函数感觉有问题，计算出的斜率竟然和股价有关系，股价高计算出的斜率数值比较大，股价低计算出的斜率数值比较小，这样没有统一的比较基准，使用起来很不方便。如果用来表示均线是向上还是向下还可以用用，但是如果用来计算均线的角度，那就用不了了。</p>
<p>当然我可能对这个函数有误解，欢迎提出问题，交流探讨。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[第二十三篇——通达信自动提示穿头破脚K线组合形态（从零起步编写通达信指标公式系列）]]></title>
        <id>https://blog.elex.vip/post/di-er-shi-san-pian-tong-da-xin-zi-dong-ti-shi-chuan-tou-po-jiao-k-xian-zu-he-xing-tai-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/</id>
        <link href="https://blog.elex.vip/post/di-er-shi-san-pian-tong-da-xin-zi-dong-ti-shi-chuan-tou-po-jiao-k-xian-zu-he-xing-tai-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/">
        </link>
        <updated>2024-11-14T09:12:55.000Z</updated>
        <content type="html"><![CDATA[<p><strong>内容提要</strong>：今天给大家介绍一个比较应景的K线组合形态——穿头破脚。</p>
<h2 id="一-穿头破脚介绍">一、穿头破脚介绍</h2>
<p>穿头破脚K线组合形态由两根反向的K线组成，第二根K的实体部分要完全覆盖第一根K线的实体部分。可以分为顶部穿头破解和底部穿头破脚两类。（如下图）<br>
<img src="https://blog.elex.vip/post-images/1731575714633.png" alt="" loading="lazy"><br>
<img src="https://blog.elex.vip/post-images/1731575718713.png" alt="" loading="lazy"><br>
穿头破脚通常被视为反转信号，表明潜在的趋势变化。如果穿头破脚出现在上涨趋势之后，它可能表明上涨即将结束，下跌即将开始。类似地，如果穿头破脚模式出现在下跌趋势之后，它可能表明趋势正在反转，上涨即将开始。</p>
<p>在利用穿头破脚K线组合形态分析行情时，可以考虑以下几点：</p>
<ol>
<li>穿头破脚出现的位置：如果穿头破脚出现在一个趋势的尾部，它可能是一个反转信号；如果出现在一个震荡市场中，它可能是一个突破信号。</li>
<li>穿头破脚K线的大小：如果穿头破脚第二根K线比第一根更大，则可能表明趋势反转的力量较大。</li>
<li>与其他技术指标的结合使用：穿头破脚应与其他技术指标结合使用，如成交量、均线等，以确认潜在的趋势变化。</li>
</ol>
<h2 id="二-穿头破脚通达信指标公式编写">二、穿头破脚通达信指标公式编写</h2>
<p>穿头破脚思路：</p>
<p>如果K线太短小也没有意义，所以有必要给K线的幅度做一些限制。这里限制第一根K线幅度大于3%，第二根K线幅度大于4%。另外第二根K线实体部分要覆盖第一根K线的实体部分。</p>
<pre><code class="language-plaintext">K1:=ABS(REF(C,1)-REF(O,1))/REF(O,1)&gt;0.03;
K2:=ABS(C-O)/O&gt;0.04;
A1:=MAX(C,O)&gt;MAX(REF(C,1),REF(O,1));
A2:=MIN(C,O)&lt;MIN(REF(C,1),REF(O,1));
STICKLINE(K1 AND K2 AND A1 AND A2,C,O,3,0),COLORYELLOW;
DRAWTEXT(K1 AND K2 AND A1 AND A2,H*1.01,'穿头破脚'),COLORYELLOW;
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731575789238.png" alt="" loading="lazy"><br>
上面的写法没有区分底部穿头破脚和顶部穿头破脚，如果想做区分，可以分开写。公式如下：</p>
<pre><code class="language-plaintext">K1:=REF(C,1)/REF(O,1)&gt;1.03 AND C/O&lt;0.96 AND C&lt;REF(O,1) AND O&gt;REF(C,1);
K2:=REF(C,1)/REF(O,1)&lt;0.97 AND C/O&gt;1.04 AND C&gt;REF(O,1) AND O&lt;REF(C,1);
STICKLINE(K1,H,L,0,0),COLORGREEN;
STICKLINE(K1,C,O,3,0),COLORGREEN;
DRAWTEXT(K1,H*1.01,'顶部穿头破脚'),COLORGREEN;
STICKLINE(K2,H,L,0,0),COLORYELLOW;
STICKLINE(K2,C,O,3,0),COLORYELLOW;
DRAWTEXT(K2,L*0.99,'底部穿头破脚'),COLORYELLOW;
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731575825108.png" alt="" loading="lazy"><br>
<img src="https://blog.elex.vip/post-images/1731575840396.png" alt="" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[第二十二篇——「硬核讲解」通达信如何跨周期引用均线？（从零起步编写通达信指标公式系列）]]></title>
        <id>https://blog.elex.vip/post/di-er-shi-er-pian-ying-he-jiang-jie-tong-da-xin-ru-he-kua-zhou-qi-yin-yong-jun-xian-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/</id>
        <link href="https://blog.elex.vip/post/di-er-shi-er-pian-ying-he-jiang-jie-tong-da-xin-ru-he-kua-zhou-qi-yin-yong-jun-xian-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/">
        </link>
        <updated>2024-11-14T09:03:53.000Z</updated>
        <content type="html"><![CDATA[<p><strong>内容提要</strong>：本文主要介绍了编写通达信跨周期引用均线指标公式需要用到的方法，以及在固定位置写文字、数字需要使用的函数，并进行综合运用编写指标公式。</p>
<p>这几天有人问能否实现主图标记不同周期均线价格并按大小实时排序，比如显示60分钟，120分钟，日线，周线，5/10/20/30/60周期均线价格并自动排序，或者能否实现在主图右侧单独标记出不同周期价格点位，而不需要显示出跨周期均线以免主图太复杂。</p>
<p>针对这个问题，主要解决思路是实现跨周期引用均线数据并且在主图右侧标记点位，不然图上画出很多均线，完全看不清。</p>
<p>实现这个思路需要用到两点知识：第一点跨周期引用均线；第二点在主图右侧标记点位。<br>
<img src="https://blog.elex.vip/post-images/1731575113002.png" alt="" loading="lazy"></p>
<h2 id="一-通达信跨周期引用均线">一、通达信跨周期引用均线</h2>
<p>通达信跨周期引用有两种方法：<br>
1. 直接用符号#改变周期，但是这种方法只适合高(HIGH)、开(OPEN)、低(LOW)、收(CLOSE)等基本数据，而且只能小周期引用大周期。<br>
2. 调用公式获取其他周期的数据，也是用符号#改变周期。这种方法可以引用大周期，也可以引用小周期。可以引用的周期为：MIN1，MIN5，MIN15，MIN30，MIN60，DAY，WEEK，MONTH（分别为1分钟，5分钟，15分钟，30分钟，60分钟，日线，周线，月线）。</p>
<p>根据需求，我们用第2种方法。把主周期定位在日线，在日K线图上，我们引用大周期——周线图的5/10/20/30/60这5条均线数据，以及小周期——60分钟图的5/10/20/30/60均线数据。</p>
<p>引用小周期要注意，需要用通达信的“盘后数据下载”把小周期的数据补充完整，不然出不了结果。</p>
<h2 id="二-在主图右侧标记点位">二、在主图右侧标记点位</h2>
<p>在主图右侧标记点位，其实就是在固定位置显示文字、数字，这需要用到DRAWTEXT_FIX、DRAWNUMBER_FIX这两个函数。</p>
<p>在<a href="https://blog.elex.vip/post/di-shi-liu-pian-xue-hui-biao-ji-han-shu-jian-dan-shi-xian-tong-da-xin-zhi-biao-gong-shi-zuo-biao-ji-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie">《第十六篇——学会标记函数，简单实现通达信指标公式做标记（从零起步编写通达信指标公式系列）》</a>这篇文章中已经介绍过DRAWTEXT、DRAWNUMBER这两个函数，分别用来写文字、写数字，可以根据设定的参数来写，比如在高点（HIGH）或者低点（LOW）位置处写文字、数字，位置会随着当下的价格变化，比较灵活。而DRAWTEXT_FIX、DRAWNUMBER_FIX多了一个FIX，FIX在英文里有“固定”的意思，可以实现在窗口的某个固定位置写文字、写数字。</p>
<h3 id="1-drawtext_fix">1、DRAWTEXT_FIX</h3>
<p>含义：在固定位置写文字</p>
<p>使用方法：DRAWTEXT_FIX(COND,X,Y,TYPE,TEXT)，满足COND条件时，在当前窗口内(X,Y)位置写文字。TEXT为文字的内容，X,Y可以理解为比例坐标，TYPE为0是左对齐，为1是右对齐。<br>
<img src="https://blog.elex.vip/post-images/1731575220105.png" alt="" loading="lazy"><br>
为了方便理解X,Y坐标的含义，可以看上图。左上角是0,0，左下角是0,1，右上角是1,0，右下角是1,1，如果X、Y都是0.5，那就在窗口的中间位置。</p>
<p>如果还不理解，可以把下面五句代码分别加载到主图上看一下，看这个“牛”字显示在哪里。注意，在公式中文字要用英文单引号。</p>
<pre><code class="language-plaintext">DRAWTEXT_FIX(ISLASTBAR,0,0,0,'牛');
DRAWTEXT_FIX(ISLASTBAR,0,1,0,'牛');
DRAWTEXT_FIX(ISLASTBAR,1,0,0,'牛');
DRAWTEXT_FIX(ISLASTBAR,1,1,0,'牛');
DRAWTEXT_FIX(ISLASTBAR,0.5,0.50,'牛');
</code></pre>
<p>显然，要实现在右上角写文字，那X等于1或者接近于1，Y等于0或者接近于0就可以实现。</p>
<h3 id="2-drawnumber_fix">2、DRAWNUMBER_FIX</h3>
<p>含义：在固定位置写数字<br>
使用方法：DRAWNUMBER_FIX(COND,X,Y,TYPE,NUMBER)，满足COND条件时，在坐标X,Y位置写数字NUMBER，TYPE为0左对齐，为1右对齐。</p>
<p>和DRAWTEXT_FIX用法差不多，就是把文字换成了数字，这里就不详细讲了。</p>
<h2 id="三-通达信跨周期引用均线指标公式编写">三、通达信跨周期引用均线指标公式编写</h2>
<p>首先看一下效果图（如下图），指标公式内容就不详细讲解了，思路上面已经讲过。源码看起来很多，但是大部分是用来调整位置，使指标公式显示效果更佳美观而已。核心还是跨周期引用周线和60分钟线的5/10/20/30/60均线，然后在日线图上显示。<br>
<img src="https://blog.elex.vip/post-images/1731575292985.png" alt="" loading="lazy"><br>
先把下面5条均线保存为公式名称为MAJX的指标，后面新建的一个指标公式，需要引用MAJX这个指标公式。</p>
<pre><code class="language-plaintext">MA1:MA(C,5);
MA2:MA(C,10);
MA3:MA(C,20);
MA4:MA(C,30);
MA5:MA(C,60);
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://blog.elex.vip/post-images/1731575318519.png" alt="" loading="lazy"></figure>
<pre><code class="language-plaintext">MA5:MA(C,5);
MA10:MA(C,10);
MA20:MA(C,20);
MA30:MA(C,30);
MA60:MA(C,60);

{引用周线数据}
MZ5:=MAJX.MA1#WEEK;
MZ10:=MAJX.MA2#WEEK;
MZ20:=MAJX.MA3#WEEK;
MZ30:=MAJX.MA4#WEEK;
MZ60:=MAJX.MA5#WEEK;

{写周线的均线文字、数据}
DRAWTEXT_FIX(ISLASTBAR,0.94,0,0,'周线');
 
DRAWTEXT_FIX(ISLASTBAR,0.93,0.02,0,'MA5');
DRAWNUMBER_FIX(ISLASTBAR,0.96,0.02,0,MZ5);

DRAWTEXT_FIX(ISLASTBAR,0.93,0.04,0,'MA10');
DRAWNUMBER_FIX(ISLASTBAR,0.96,0.04,0,MZ10);

DRAWTEXT_FIX(ISLASTBAR,0.93,0.06,0,'MA20');
DRAWNUMBER_FIX(ISLASTBAR,0.96,0.06,0,MZ20);

DRAWTEXT_FIX(ISLASTBAR,0.93,0.08,0,'MA30');
DRAWNUMBER_FIX(ISLASTBAR,0.96,0.08,0,MZ30);

DRAWTEXT_FIX(ISLASTBAR,0.93,0.1,0,'MA60');
DRAWNUMBER_FIX(ISLASTBAR,0.96,0.1,0,MZ60);

{引用小时线数据}
MH5:=MAJX.MA1#MIN60;
MH10:=MAJX.MA2#MIN60;
MH20:=MAJX.MA3#MIN60;
MH30:=MAJX.MA4#MIN60;
MH60:=MAJX.MA5#MIN60;

{写小时线均线的文字、数据}
DRAWTEXT_FIX(ISLASTBAR,0.94,0.14,0,'小时线');
DRAWTEXT_FIX(ISLASTBAR,0.93,0.16,0,'MA5');
DRAWNUMBER_FIX(ISLASTBAR,0.96,0.16,0,MH5);

DRAWTEXT_FIX(ISLASTBAR,0.93,0.18,0,'MA10');
DRAWNUMBER_FIX(ISLASTBAR,0.96,0.18,0,MH10);

DRAWTEXT_FIX(ISLASTBAR,0.93,0.20,0,'MA20');
DRAWNUMBER_FIX(ISLASTBAR,0.96,0.20,0,MH20);

DRAWTEXT_FIX(ISLASTBAR,0.93,0.22,0,'MA30');
DRAWNUMBER_FIX(ISLASTBAR,0.96,0.22,0,MH30);

DRAWTEXT_FIX(ISLASTBAR,0.93,0.24,0,'MA60');
DRAWNUMBER_FIX(ISLASTBAR,0.96,0.24,0,MH60);
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://blog.elex.vip/post-images/1731575447318.png" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[第二十一篇——MACD与KDJ合二为一指标公式怎么编写？（从零起步编写通达信指标公式系列）]]></title>
        <id>https://blog.elex.vip/post/di-er-shi-yi-pian-macd-yu-kdj-he-er-wei-yi-zhi-biao-gong-shi-zen-me-bian-xie-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/</id>
        <link href="https://blog.elex.vip/post/di-er-shi-yi-pian-macd-yu-kdj-he-er-wei-yi-zhi-biao-gong-shi-zen-me-bian-xie-cong-ling-qi-bu-bian-xie-tong-da-xin-zhi-biao-gong-shi-xi-lie/">
        </link>
        <updated>2024-11-14T08:57:26.000Z</updated>
        <content type="html"><![CDATA[<p><strong>内容提要</strong>：在编写MACD与KDJ合二为一指标公式之前，先来了解一下技术指标共振。常见的技术指标共振有三种类型：单指标多周期共振、单指标多级别共振、多技术指标共振，今天主要介绍第三种。</p>
<p>多技术指标共振是指多个技术指标显示出相似的趋势或信号，这通常被视为市场趋势或价格变化的信号，并表明市场可能出现更大的变化。通过寻找多技术指标共振的信号，提高成功率，以便做出相对明智的交易决策。但是要注意，多技术指标共振并不是一定可靠的，有时技术指标可能会出现逆势信号。因此，对于使用技术分析进行交易的人来说，要知道指标有一定的成功概率，不能保证做到盈利，需要结合交易系统、资金管理等进行综合决策。</p>
<p>MACD指标和KDJ指标是比较常用的指标，尤其MACD，基本上交易软件副图都是默认使用MACD指标。</p>
<p>MACD指标有三个输出变量，DIF（快线）、DEA（慢线）和MACD柱线，另外还有一个在MACD的公式里没有明显体现，但是却非常重要的0轴。下图为通达信自带MACD指标公式，默认参数（12,26,9）。<br>
<img src="https://blog.elex.vip/post-images/1731574754478.png" alt="" loading="lazy"><br>
KDJ指标也有三个输出变量，K（快线）、D（慢线）和J（敏感线）。下图为通达信软件自带KDJ指标公式，默认参数（9,3,3）。<br>
<img src="https://blog.elex.vip/post-images/1731574764092.png" alt="" loading="lazy"><br>
今天主要利用MACD与KDJ的金叉共振，在看盘界面发出信号或者选股。MACD金叉其实是DIF、DEA金叉，KDJ金叉为K、D金叉。</p>
<p>总体来说还是比较简单的，MACD和KDJ的源码照抄，参数就用默认参数。分别写出金叉条件，用AND连接就行了。如果想做成MACD与KDJ合二为一指标公式在副图上显示，两个指标会比较杂乱，可以只显示其中一个指标就行了，另一个不显示。我这里是只显示MACD。此外可以给技术指标加上提醒，方便观察信号。</p>
<pre><code class="language-plaintext">DIF:EMA(CLOSE,12)-EMA(CLOSE,26);
DEA:EMA(DIF,9);
MACD:(DIF-DEA)*2,COLORSTICK;
RSV:=(CLOSE-LLV(LOW,9))/(HHV(HIGH,9)-LLV(LOW,9))*100;
K:=SMA(RSV,3,1);
D:=SMA(K,3,1);
J:=3*K-2*D;
JC:=CROSS(DIF,DEA) AND CROSS(K,D);{MACD、KDJ同时金叉}
DRAWICON(JC,DEA,1);{同时金叉，画小箭头}
STICKLINE(JC,0,DEA,1,0),COLORYELLOW;{同时金叉，画黄色柱线};
</code></pre>
<p><img src="https://blog.elex.vip/post-images/1731574793502.png" alt="" loading="lazy"><br>
<img src="https://blog.elex.vip/post-images/1731574797406.png" alt="" loading="lazy"><br>
平时我们看盘可以发现，MACD的0轴类似于主图的MA60均线，可以看到K线在MA60上方，DIF基本上也会在0轴上方，虽然不完全同步，但是可以作为参考。（如下图）如果不想逆势在MA60下方做交易，可以再加上限制条件DIF&gt;0，就可以过滤掉MACD零轴下方的信号。</p>
<pre><code class="language-plaintext">JC:=CROSS(DIF,DEA) AND CROSS(K,D) AND DIF&gt;0;
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://blog.elex.vip/post-images/1731574812008.png" alt="" loading="lazy"></figure>
]]></content>
    </entry>
</feed>